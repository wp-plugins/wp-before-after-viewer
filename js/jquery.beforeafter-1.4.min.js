/*
 * jQuery beforeafter plugin
 * @author admin@catchmyfame.com - http://www.catchmyfame.com
 * @version 1.4
 * @date September 19, 2011
 * @category jQuery plugin
 * @copyright (c) 2009 admin@catchmyfame.com (www.catchmyfame.com)
 * @license CC Attribution-NonCommercial-ShareAlike 3.0 Unported (CC BY-NC-SA 3.0) - http://creativecommons.org/licenses/by-nc-sa/3.0/
 */
!function(a){a.fn.extend({beforeAfter:function(b){var c={animateIntro:!1,introDelay:1e3,introDuration:1e3,introPosition:.5,showFullLinks:!0,beforeLinkText:"Show only before",afterLinkText:"Show only after",imagePath:"./js/",cursor:"pointer",clickSpeed:600,linkDisplaySpeed:200,dividerColor:"#888",enableKeyboard:!1,keypressAmount:20,onReady:function(){}},b=a.extend(c,b),d=Math.round(1e8*Math.random());return this.each(function(){function k(){a("#lt-arrow"+d+", #rt-arrow"+d).stop().css("opacity",0),a("div:eq(2)",e).width(parseInt(a(this).css("left"))+4)}function l(){a(e).hover(function(){a("#lt-arrow"+d).stop().css({"z-index":"20",position:"absolute",top:g/2-a("#lt-arrow"+d).height()/2+"px",left:parseInt(a("#dragwrapper"+d).css("left"))-10+"px"}).animate({opacity:1,left:parseInt(a("#lt-arrow"+d).css("left"))-6+"px"},200),a("#rt-arrow"+d).stop().css({position:"absolute",top:g/2-a("#lt-arrow"+d).height()/2+"px",left:parseInt(a("#dragwrapper"+d).css("left"))+10+"px"}).animate({opacity:1,left:parseInt(a("#rt-arrow"+d).css("left"))+6+"px"},200),a("#dragwrapper"+d).animate({opacity:1},200)},function(){a("#lt-arrow"+d).animate({opacity:0,left:parseInt(a("#lt-arrow"+d).css("left"))-6+"px"},350),a("#rt-arrow"+d).animate({opacity:0,left:parseInt(a("#rt-arrow"+d).css("left"))+6+"px"},350),a("#dragwrapper"+d).animate({opacity:.25},350)}),a(e).click(function(b){var f=b.pageX-a(this).offset().left;a("#dragwrapper"+d).stop().animate({left:f-a("#dragwrapper"+d).width()/2+"px"},c.clickSpeed),a("div:eq(2)",e).stop().animate({width:f+"px"},c.clickSpeed),a("#lt-arrow"+d+",#rt-arrow"+d).stop().animate({opacity:0},50)}),a(e).one("mousemove",function(){a("#dragwrapper"+d).stop().animate({opacity:1},500)})}var c=b,e=a(this),f=a("img:first",e).width(),g=a("img:first",e).height();if(f>.95*a(window).width()){var h=.95*a(window).width()/f;f=.95*a(window).width(),g*=h}2!=a("div",e).length&&a("img",e).wrap("<div>"),a(e).width(f).height(g).css({overflow:"hidden",position:"relative",padding:"0"}),a("img:first",e).attr("src"),a("img:last",e).attr("src"),a("img:first",e).attr("id","beforeimage"+d),a("img:last",e).attr("id","afterimage"+d),a(e).prepend('<div id="dragwrapper'+d+'"><div id="drag'+d+'"><img width="8" height="56" alt="handle" src="'+c.imagePath+'handle.gif" id="handle'+d+'"  class="ba_img" /></div></div>'),a("#dragwrapper"+d).css({opacity:.25,position:"absolute",padding:"0",left:f*c.introPosition-a("#handle"+d).width()/2+"px","z-index":"20"}).width(a("#handle"+d).width()).height(g),a("div:eq(2)",e).height(g).width(f*c.introPosition).css({position:"absolute",overflow:"hidden",left:"0px","z-index":"10"}),a("div:eq(3)",e).height(g).width(f).css({position:"absolute",overflow:"hidden",right:"0px"}),a("#drag"+d).width(2).height(g).css({background:c.dividerColor,position:"absolute",left:"3px"}),a("#beforeimage"+d).css({position:"absolute",top:"0px",left:"0px",width:f,height:g}),a("#afterimage"+d).css({position:"absolute",top:"0px",right:"0px",width:f,height:g}),a("#handle"+d).css({"z-index":"100",position:"relative",cursor:c.cursor,top:g/2-a("#handle"+d).height()/2+"px",left:"-3px"}),a(e).append('<img src="'+c.imagePath+'lt-small.png" width="7" height="15" id="lt-arrow'+d+'"><img src="'+c.imagePath+'rt-small.png" width="7" height="15" id="rt-arrow'+d+'">'),c.showFullLinks&&(a(e).after('<div class="balinks" id="links'+d+'" style="position:relative"><span class="balinks"><a id="showleft'+d+'" href="javascript:void(0)">'+c.beforeLinkText+'</a></span><span class="balinks"><a id="showright'+d+'" href="javascript:void(0)">'+c.afterLinkText+"</a></span></div>"),a("#links"+d).width(f),a("#showleft"+d).css({position:"relative",left:"0px"}).click(function(){a("div:eq(2)",e).animate({width:f},c.linkDisplaySpeed),a("#dragwrapper"+d).animate({left:f-a("#dragwrapper"+d).width()+"px"},c.linkDisplaySpeed)}),a("#showright"+d).css({position:"absolute",right:"0px"}).click(function(){a("div:eq(2)",e).animate({width:0},c.linkDisplaySpeed),a("#dragwrapper"+d).animate({left:"0px"},c.linkDisplaySpeed)})),c.enableKeyboard&&a(document).keydown(function(b){39==b.keyCode&&(parseInt(a("#dragwrapper"+d).css("left"))+parseInt(a("#dragwrapper"+d).width())+c.keypressAmount<=f?(a("#dragwrapper"+d).css("left",parseInt(a("#dragwrapper"+d).css("left"))+c.keypressAmount+"px"),a("div:eq(2)",e).width(parseInt(a("div:eq(2)",e).width())+c.keypressAmount+"px")):(a("#dragwrapper"+d).css("left",f-parseInt(a("#dragwrapper"+d).width())+"px"),a("div:eq(2)",e).width(f-parseInt(a("#dragwrapper"+d).width())/2+"px"))),37==b.keyCode&&(parseInt(a("#dragwrapper"+d).css("left"))-c.keypressAmount>=0?(a("#dragwrapper"+d).css("left",parseInt(a("#dragwrapper"+d).css("left"))-c.keypressAmount+"px"),a("div:eq(2)",e).width(parseInt(a("div:eq(2)",e).width())-c.keypressAmount+"px")):(a("#dragwrapper"+d).css("left","0px"),a("div:eq(2)",e).width(a("#dragwrapper"+d).width()/2)))}),a("#dragwrapper"+d).draggable({containment:e,drag:k,stop:k}),c.animateIntro?(a("div:eq(2)",e).width(f),a("#dragwrapper"+d).css("left",f-a("#dragwrapper"+d).width()/2+"px"),setTimeout(function(){a("#dragwrapper"+d).css({opacity:1}).animate({left:f*c.introPosition-a("#dragwrapper"+d).width()/2+"px"},c.introDuration,function(){a("#dragwrapper"+d).animate({opacity:.25},1e3)}),a("div:eq(2)",e).width(f).animate({width:f*c.introPosition+"px"},c.introDuration,function(){l(),c.onReady.call(this)})},c.introDelay)):(l(),c.onReady.call(this))})}})}(jQuery);
